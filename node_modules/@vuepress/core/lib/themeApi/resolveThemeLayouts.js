"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.resolveThemeLayouts = void 0;
const shared_1 = require("@vuepress/shared");
const utils_1 = require("@vuepress/utils");
const resolveThemeLayouts = ({ themePath, themePlugin, }) => {
    if (!themePlugin.layouts) {
        return [];
    }
    // use the layouts component map directly
    if (shared_1.isPlainObject(themePlugin.layouts)) {
        return Object.entries(themePlugin.layouts).map(([name, file]) => ({
            name,
            path: file,
        }));
    }
    // resolve the layouts directory
    if (!utils_1.fs.pathExistsSync(themePlugin.layouts)) {
        throw utils_1.logger.createError(`layouts directory does not exist: ${utils_1.chalk.magenta(themePlugin.layouts)}`);
    }
    // load all files in layouts directory
    const files = utils_1.fs.readdirSync(themePlugin.layouts);
    // take matched files as theme layouts
    const layouts = files
        .filter((file) => /\.(vue|ts|js)$/.test(file))
        .map((file) => ({
        name: utils_1.path.trimExt(file),
        path: utils_1.path.resolve(themePlugin.layouts, file),
    }));
    return layouts;
};
exports.resolveThemeLayouts = resolveThemeLayouts;
